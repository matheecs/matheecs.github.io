---
layout: post
title: "RL Notes"
categories: study
author: "Jixiang Zhang"
---

<p align="center">
  <img src="{{site.baseurl}}/images/rl.jpg" width="500"/>
</p>

<https://github.com/engineai-robotics/engineai_legged_gym>

LeggedRobotCfg:

* env
* terrian
* init_state
* control
* sim
* viewer
* noise
* normalization
* commands
* asset
* domain_rand
* rewards

LeggedRobotCfgPPO:

* policy
* runner
* algorithm

LeggedRobot:

* __init__()
* step()
* compute_observations()
* reset_idx()
* set_camera()
* check_termination()
* compute_reference_states()
* create_sim()
* post_physics_step()
* update_command_curriculum()
* compute_reward()
* __Rewards__:
  * no_fly
  * target_joint_pos_l
  * target_joint_pos_r
  * orientation
  * tracking_lin_x_vel
  * tracking_lin_y_vel
  * action_smoothness
  * feet_distance
  * ankle_action_rate
  * ankle_dof_acc
  * target_ankle_pos
  * target_hip_roll_pos

```text
[Rewards][ ✔ ] action_rate
[Rewards][ x ] action_smoothness
[Rewards][ x ] ang_vel_xy
[Rewards][ ✔ ] ankle_action_rate
[Rewards][ ✔ ] ankle_dof_acc
[Rewards][ x ] base_height
[Rewards][ ✔ ] collision
[Rewards][ ✔ ] dof_acc
[Rewards][ ✔ ] dof_pos_limits
[Rewards][ x ] dof_vel
[Rewards][ x ] feet_air_time
[Rewards][ ✔ ] feet_contact_forces
[Rewards][ ✔ ] feet_distance
[Rewards][ x ] feet_stumble
[Rewards][ ✔ ] lin_vel_z
[Rewards][ x ] no_fly
[Rewards][ ✔ ] orientation
[Rewards][ x ] stand_still
[Rewards][ x ] target_ankle_pos
[Rewards][ x ] target_hip_roll_pos
[Rewards][ ✔ ] target_joint_pos_l
[Rewards][ ✔ ] target_joint_pos_r
[Rewards][ ✔ ] termination
[Rewards][ ✔ ] torque_limits
[Rewards][ ✔ ] torques
[Rewards][ ✔ ] tracking_ang_vel
[Rewards][ x ] tracking_lin_vel
[Rewards][ ✔ ] tracking_lin_x_vel
[Rewards][ ✔ ] tracking_lin_y_vel
```

```bash
                     Learning iteration 20291/40000                     

                       Computation: 215205 steps/s (collection: 0.333s, learning 0.124s)
               Value function loss: 0.2949
                    Surrogate loss: -0.0028
             Mean action noise std: 0.51
                       Mean reward: 628.45
               Mean episode length: 1985.67
      Mean episode rew_action_rate: -1.6791
Mean episode rew_ankle_action_rate: -0.3818
    Mean episode rew_ankle_dof_acc: -0.0201
        Mean episode rew_collision: -0.0008
          Mean episode rew_dof_acc: -0.1378
   Mean episode rew_dof_pos_limits: -0.0000
Mean episode rew_feet_contact_forces: -0.2618
    Mean episode rew_feet_distance: 0.9603
        Mean episode rew_lin_vel_z: -0.0237
      Mean episode rew_orientation: 9.7049
Mean episode rew_target_joint_pos_l: 9.0367
Mean episode rew_target_joint_pos_r: 7.1679
      Mean episode rew_termination: -0.0000
    Mean episode rew_torque_limits: -0.0351
          Mean episode rew_torques: -0.1538
 Mean episode rew_tracking_ang_vel: 1.7254
Mean episode rew_tracking_lin_x_vel: 3.2664
Mean episode rew_tracking_lin_y_vel: 2.3819
```
